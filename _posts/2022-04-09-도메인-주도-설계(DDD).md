---
title: 도메인 주도 설계(DDD)
author: asy
date: 2022-04-09 19:12:00 -0500
categories: [DDD]
tags: [설계]

---

 이번 포스팅은 도메인 주도 설계를 간단하게 정리합니다. 도메인 주도 설계의 핵심은 아래와 같습니다.

 - 도메인 전문가(기획자)와 개발자가 어떻게 협업할 것인지가 중요
 - 보편 언어 : 누구나 이해할 수 있는 언어를 사용
 - 모델 주도 디자인

## 도메인 이란?

- 사전적 의미로 영역, 집합
- 비즈니스 Domain 을 의미
- 예를 들어 주문, 고객, 주소관리 등등과 같이 분리
- **실제 사건이 발생하는 집합**

## DDD 의 2가지 종류

### 전략적 설계

- 비즈니스의 상황(Context : 대상자, 상황)에 맞게 설계
- 모든 Context 를 **이벤트 스토밍**을 통해 공유
- 각 Context 를 그룹핑(Bounded Context)
- Context Mapping 을 통해 Bounded Context 간의 관계를 정의

> 전략적 설계의 결과물 : 도메인 모델(서비스를 추상화한 설계도, 분리 & 연결)

### 전술적 설계

- 더 상세한 부분(Bounded Context 내부) 모델링
- Model driven design
- Aggregate : 각각의 도메인 영역을 대표하는 객체
- 계층형 아키텍처를 통한 도메인 모델 분리
- 도메인 이벤트를 통해 도메인을 보다 명확히 모델링

## 이벤트 스토밍 순서

### Domain Event 정의 (추상화)

- Event 는 Actor 가 Action 을 해서 발생한 결과
- 각자 생각나는 Event 를 적고 더 이상 생각이 안 날때까지 정의합니다.
- 서로 상이하면서 중복된 것을 없애거나 합칩니다.
- 이벤트가 발생하는 시간 순서대로 정의, 동시에 발생하는 것도 정의
- 비즈니스 용어로 무슨 일이 발생했는지를 정의하는 것이지 , 시스템 내에서 발생되는 것을 찾지 말아야 합니다.(보편 언어 사용)

### 프로세스 그룹핑

- 동일한 비즈니스 주제(업무 프로세스)로 이벤트들을 그룹핑합니다.
- 비즈니스적으로 중요한 핵심 프로세스에 집중합니다. 핵심 프로세스에 중요한 이벤트가 누락되지 않았는지 검포합니다.
- 지원 프로세스는 너무 자세하게 이벤트를 식별하지 않습니다.

### Command 정의

- 사용자의 행위가 Command 가 됩니다. Command 는 일반적으로 '무엇을 CRUD 요청한다.' 또는 '무엇을 XX 한다' 의 형태가 됩니다.
- 각 Event 별로 그 Event 를 발생시키는 Command 가 무엇인지 생각합니다.
- Command 하나에 1개 이상의 Event 가 발생할 수 있습니다.

### Trigger 정의

- Command 를 수행하는 Actor 를 정의합니다.
- Event 발생과 관련된 외부 시스템을 정의합니다. 

### Aggregate 정의

- Command 수행을 위해 CRUD 해야 하는 데이터 객체 정의
- Command 를 수행해서 Event 발생시키려면 어떤 데이터(정보)가 필요한지 정의

### Bounded Context 정의

- 정의된 다양한 Event 를 묶어 놓는 것을 Context 라고 정의
- 정의된 Context 를 영역을 구분해 정의

